$(".overlay-inner").find("form").after('<a href="#" class="overlay-hide"><span>Hide window</span></a>');$(".button-search").remove();$(".main-main-in").prepend('<div id="js-searchcontainer"></div>');
var removeFocus=function(){$("a").removeAttr("tabindex");$(".noFocus").find("a, input, button, textarea, h3").attr("tabindex","-1");};var setFocus=function(a){$("a").attr("tabindex","-1");
$(a).find("a, input, button, textarea, h3").removeAttr("tabindex");};var setActive=function(a){if(a=="#overlay-search"){$(a).find("input").focus();}else{if(a=="#overlay-contact"){$("#overlay-contact-label").attr("tabindex","0").focus();
}}};var hideOverlay=function(){var a=window.location.hash;window.location.hash="";$("a[href="+a+"]").focus();$(".main-header-nav-item").removeClass("selected");
removeFocus();if(a=="#overlay-search"&&getcount("search")==0){$("#js-searchinput").val("");$("#js-searchcount").remove();$(".main-main-in").find("article").removeClass("js-hidden");
setTimeout(function(){$(".main-main-in").find("article").removeClass("js-faded");},300);}else{if(a=="#overlay-contact"){$("input, textarea").val("");$("#js-contactmessage").remove();
$("input, textarea").removeClass("user-success");}}};removeFocus();var hash=window.location.hash;if(hash!=""){$(".main-header-nav-item").find("a[href="+hash+"]").parent().addClass("selected");
setFocus(hash);setActive(hash);}$(".main-header-nav-item").on("click","a",function(c){var a=$(this).attr("href"),b=window.location.hash;if(a==b){hideOverlay();
c.preventDefault();}else{removeFocus();if($(".tip-menu").length>0){hideMenu();}setFocus(a);$(this).parent().addClass("selected").siblings().removeClass("selected");
setActive(a);}});$(document).keyup(function(a){if(a.which==27){hideOverlay();if($(".tip-menu").length>0){hideMenu();}}});$(".overlay").on("click",".overlay-hide",function(){hideOverlay();
});$(".form-row-radio-item").find("label").on("click",function(){var a=$(this).attr("for");if(a=="send-sug"){$(".overlay-contact").find("[for=msg]").text("Your tip").end().find(".overlay-contact-hint").fadeIn();
}else{if(a=="send-msg"){$(".overlay-contact").find("[for=msg]").text("Your message").end().find(".overlay-contact-hint").fadeOut();}}});$("#js-overlay-contact-form").submit(function(a){a.preventDefault();
$.post("process.php",{event:"email",contacttype:$(".overlay-contact").find("[name=contact-type]:checked").val(),name:$(".overlay-contact").find("[name=name]").val(),email:$(".overlay-contact").find("[name=email]").val(),msg:$(".overlay-contact").find("[name=msg]").val()},function(b){$(".overlay-contact").find("form").prepend('<p class="message message-dark message-success" id="js-contactmessage">'+b+"</p>");
$("html, body").animate({scrollTop:0},"slow");}).error(function(){$(".overlay-contact").find("form").prepend('<p class="message message-dark message-error" id="js-contactmessage">An error has occured. Please try again.</p>');
});});var getcount=function(b){if(b=="tips"){var c="tipscount";}if(b=="search"){var c="searchcount";}var a;$.ajax({type:"POST",url:"process.php",async:false,data:{event:c,searchterm:$("[name=searchterm]").val()},success:function(d){a=d;
}});return a;};var startTips=5,countTips=5;var getTips=function(a){$.post("process.php",{event:"loadmore",start:startTips,count:countTips},function(b){$(a).before(b);
setTimeout(function(){$(".js-faded").removeClass("js-faded");},300);$(a).removeClass("is-active");startTips=startTips+countTips;var c=getcount("tips");
if(startTips>=c){$(".loadmore").hide();}}).error(function(){$(a).before('<p class="message message-error">An error has occured. Please try again.</p>');
});};$("#js-loadmore").on("click",function(b){var a=$(this);$(a).addClass("is-active");setTimeout(function(){getTips(a);},1000);b.preventDefault();});var searchTips=function(){$.post("process.php",{event:"search",searchterm:$("[name=searchterm]").val()},function(a){$(".main-main-in > article, .main-main-in #js-loadmore").addClass("js-faded js-hidden");
$(".main-main-in").find("#js-searchcontainer").empty().prepend(a);setTimeout(function(){$("#js-searchcontainer").find(".js-faded").removeClass("js-faded");
},300);setFocus("#overlay-search");}).error(function(){});};$("#js-searchinput").on("keyup",function(){if($(this).val().length>2){var a=getcount("search");
if(a>startTips){a=startTips+"+";}if($("#js-searchcount").length==1){$("#js-searchcount").html("<b>Number of tips found:</b> "+a);}else{$(".overlay-search").find(".form-row").append('<span class="overlay-search-count" id="js-searchcount" tabindex="0"><b>Number of tips found:</b> '+a+"</span>");
}searchTips();}});$("#js-overlay-search-form").submit(function(a){a.preventDefault();});var hideMenu=function(){$(".tip-menu").addClass("is-hidden");setTimeout(function(){$(".tip-menu").remove();
},300);if(clickedTitle!=null){clickedTitle.focus();}removeFocus();$("body").off();};var hideMenuOutside=function(b){var a=$(b.target);if(a.is(".tip-menu")||a.parents().is(".tip-menu")||a.is(".tip-title a")){return;
}else{hideMenu();}};$(".main-main-in").on("click",".tip-title > a",function(b){clickedTitle=$(this);if($(".tip-menu").length>0){hideMenu();}else{$("a").attr("tabindex","-1");
var c=$(this).parents(".tip-title").find("> a").text();var a=$(this).parents(".tip-title").find("> a").attr("href");a="sketchtips.info/?tip="+a.substr(5);
$(this).parent().append('<div class="tip-menu is-hidden" role="dialog" aria-label="tip-menu-label"><h3 id="tip-menu-label">Options</h3><ul><li class="tip-menu-twit"><a href="#">Tweet this tip</a></li><li class="tip-menu-comm"><a href="#">Add comment</a></li><li class="tip-menu-link">Tip link: <input type="text" class="is-hidden"/></li></ul></div>');
setTimeout(function(){$(".tip-menu").removeClass("is-hidden");$(".tip-menu-twit a").focus();},300);$(this).parent().find("input").val(a).on("click",function(){$(this).select();
});$(".tip-title").on("click",".tip-menu a",function(d){if($(this).parent().hasClass("tip-menu-twit")){window.location.href="http://twitter.com/home/?status=Check out this Sketch tip at sketchtips.info: '"+c+"' ("+a+")";
}if($(this).parent().hasClass("tip-menu-comm")){window.location.href="http://"+a+"#disqus_thread";}});$("body").on("click",function(d){hideMenuOutside(d);
}).on("tap",function(d){hideMenuOutside(d);});}b.preventDefault();});